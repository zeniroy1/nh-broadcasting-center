
import React from 'react';
import { Container, Title, Table, Badge, Grid, Card, Text, Group, ThemeIcon, ScrollArea } from '@mantine/core';
import { motion } from 'framer-motion';
import { IconMicrophone, IconVideo, IconDeviceLaptop, IconAntennaBars5, IconDisc, IconVolume } from '@tabler/icons-react';

// Nanobanana Style: Icons Mapping
const ICONS = {
    wired: <IconMicrophone size={16} />,
    wireless: <IconAntennaBars5 size={16} />,
    conference: <IconVolume size={16} />,
    anthem: <IconDisc size={16} />,
    record: <IconVideo size={16} />,
    video: <IconDeviceLaptop size={16} />
};

const DATA = [
    {
        building: 'ë³¸ê´€',
        rooms: [
            { name: 'ëŒ€ê°•ë‹¹', wired: '8', wireless: '8', conf: '-', anthem: 'O', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: 'ì¤‘íšŒì˜ì‹¤', wired: '4', wireless: '4', conf: '25', anthem: 'O', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: 'í™”ìƒíšŒì˜ì‹¤', wired: '1 (ì‚¬íšŒì„)', wireless: '2', conf: '31 (ê³ ì •)', anthem: 'O', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: 'ì†ŒíšŒì˜ì‹¤', wired: '2', wireless: '2', conf: 'X', anthem: 'X', record: 'X', video: 'ì „ìì¹ íŒ' },
            { name: 'ì‹ í† ë¶ˆì´', wired: '1', wireless: '2', conf: 'X', anthem: 'X', record: 'X', video: 'X' },
            { name: 'ë‘ë ˆì‹ë‹¹', wired: '1', wireless: '2', conf: 'X', anthem: 'X', record: 'X', video: 'X' },
            { name: 'ê²½ì˜ì „ëµì‹¤', wired: '1', wireless: '2', conf: '21 (ê³ ì •)', anthem: 'X', record: 'X', video: 'X' },
            { name: 'ì´ë™ì¥ë¹„', wired: '2', wireless: '4', conf: 'X', anthem: 'O', record: 'X', video: 'X' }
        ]
    },
    {
        building: 'ì‹ ê´€',
        rooms: [
            { name: 'ëŒ€íšŒì˜ì‹¤', wired: '6', wireless: '6', conf: '24', anthem: 'O', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: 'ì¤‘íšŒì˜ì‹¤', wired: '6', wireless: '3', conf: '20', anthem: 'O', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: '1ì†ŒíšŒì˜ì‹¤', wired: '2', wireless: '2', conf: 'X', anthem: 'X', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: '2ì†ŒíšŒì˜ì‹¤', wired: '5', wireless: '2', conf: 'X', anthem: 'X', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: '3ì†ŒíšŒì˜ì‹¤', wired: '5', wireless: '2', conf: 'X', anthem: 'X', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: 'ê²½ì˜ì „ëµíšŒì˜ì‹¤', wired: '2', wireless: '1', conf: '20 (ê³ ì •)', anthem: 'X', record: 'O', video: 'ì „ê´‘íŒ' },
            { name: 'í–‰ë³µë§ˆë£¨', wired: '1', wireless: '2', conf: 'X', anthem: 'X', record: 'X', video: 'X' },
            { name: 'ì±„ì›€ë§ˆë£¨', wired: 'X', wireless: 'X', conf: 'X', anthem: 'X', record: 'X', video: 'X' }
        ]
    }
];

const StatusBoard = () => {
    return (
        <Container size="xl" py="xl">
            <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.5 }}
            >
                <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                    <Title order={1} style={{ fontSize: '2.5rem', marginBottom: '0.5rem' }}> ë°©ì†¡ì¥ë¹„ ì´ìš© ê°€ëŠ¥ í˜„í™©</Title>
                    <Text c="dimmed" size="ls">ê° ì¥ì†Œë³„ ë°©ì†¡ì¥ë¹„ í˜„í™©ì„ í•œë²ˆì— í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</Text>
                </div>

                <Grid>
                    {DATA.map((section, secIdx) => (
                        <Grid.Col key={secIdx} span={{ base: 12 }}>
                            <Card shadow="sm" padding="lg" radius="md" withBorder>
                                <Card.Section withBorder inheritPadding py="xs" bg={secIdx === 0 ? 'blue.1' : 'green.1'}>
                                    <Group justify="space-between">
                                        <Text fw={700} size="xl" c={secIdx === 0 ? 'blue.9' : 'green.9'}>
                                            {section.building}
                                        </Text>
                                        <Badge variant="light" color={secIdx === 0 ? 'blue' : 'green'}>
                                            {section.rooms.length} Rooms
                                        </Badge>
                                    </Group>
                                </Card.Section>

                                <ScrollArea>
                                    <Table striped highlightOnHover horizontalSpacing="md" verticalSpacing="sm" layout="fixed" miw={800}>
                                        <Table.Thead>
                                            <Table.Tr>
                                                <Table.Th w={150}>íšŒì˜ì¥ëª…</Table.Th>
                                                <Table.Th><Group gap={5}><IconMicrophone size={14} /> ìœ ì„ </Group></Table.Th>
                                                <Table.Th><Group gap={5}><IconAntennaBars5 size={14} /> ë¬´ì„ </Group></Table.Th>
                                                <Table.Th><Group gap={5}><IconVolume size={14} /> íšŒì˜ìš©</Group></Table.Th>
                                                <Table.Th><Group gap={5}><IconDisc size={14} /> êµ­ë¯¼ì˜ë¡€</Group></Table.Th>
                                                <Table.Th><Group gap={5}><IconVideo size={14} /> ë…¹ìŒ/ë…¹í™”</Group></Table.Th>
                                                <Table.Th><Group gap={5}><IconDeviceLaptop size={14} /> ì˜ìƒ</Group></Table.Th>
                                            </Table.Tr>
                                        </Table.Thead>
                                        <Table.Tbody>
                                            {section.rooms.map((room, idx) => (
                                                <Table.Tr key={idx}>
                                                    <Table.Td fw={600} style={{ fontSize: '1.05rem' }}>{room.name}</Table.Td>
                                                    <Table.Td>{renderCell(room.wired, 'wired')}</Table.Td>
                                                    <Table.Td>{renderCell(room.wireless, 'wireless')}</Table.Td>
                                                    <Table.Td>{renderCell(room.conf, 'conference')}</Table.Td>
                                                    <Table.Td>{renderStatus(room.anthem)}</Table.Td>
                                                    <Table.Td>{renderStatus(room.record)}</Table.Td>
                                                    <Table.Td>{renderVideo(room.video)}</Table.Td>
                                                </Table.Tr>
                                            ))}
                                        </Table.Tbody>
                                    </Table>
                                </ScrollArea>
                            </Card>
                        </Grid.Col>
                    ))}
                </Grid>

                <Text ta="center" mt="xl" c="dimmed" size="s">
                    * ë³¸ í˜„í™©ì€ 2025.09.05 ê¸°ì¤€ì…ë‹ˆë‹¤. ì‹¤ì œ í˜„í™©ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ë°©ì†¡ìš´ì˜ë‹¨(5994)ìœ¼ë¡œ í™•ì¸ ë°”ëë‹ˆë‹¤.
                </Text>
            </motion.div>
        </Container>
    );
};

const renderCell = (value, type) => {
    if (value === 'X' || value === '-') return <Text c="gray.4">-</Text>;
    const isNumber = !isNaN(parseInt(value));
    return (
        <Group gap="xs">
            {isNumber && <ThemeIcon size="sm" variant="light" color="blue">{ICONS[type]}</ThemeIcon>}
            <Text fw={500}>{value}</Text>
        </Group>
    );
};

const renderStatus = (value) => {
    if (value === 'O') return <Badge color="teal" variant="light" size="lg">âœ… ê°€ëŠ¥</Badge>;
    if (value === 'X') return <Text c="gray.3">âŒ</Text>;
    return value;
};

const renderVideo = (value) => {
    if (value === 'X') return <Text c="gray.3">-</Text>;
    if (value.includes('ì „ê´‘íŒ')) return <Badge color="grape" variant="dot" size="lg">ğŸ“º {value}</Badge>;
    if (value.includes('ì „ìì¹ íŒ')) return <Badge color="orange" variant="outline" size="lg">ğŸ–ï¸ {value}</Badge>;
    return value;
};

export default StatusBoard;
